<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Cia's Factorialized Quantified Atomic Value Reducer</title>
  <link rel="icon" href="cia.png" type="image/png">

  <!-- Mobile & zoom responsiveness -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Three.js for 3D animated atoms background -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

  <!-- MathJax configuration -->
  <script>
    window.MathJax = {
      tex: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [['\\[', '\\]']]
      },
      svg: { fontCache: 'global' }
    };
  </script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

  <style>
    :root {
      --bg: #0f172a;
      --card: #020617;
      --text: #e5e7eb;
      --muted: #9ca3af;
      --border: #1f2937;
      --accent: #22c55e;
      --error: #f97373;
      --nonmetal: #22c55e20;
      --noble-gas: #38bdf820;
      --alkali-metal: #ef444420;
      --alkaline-earth: #f9731620;
      --metalloid: #a855f720;
      --halogen: #eab30820;
      --transition-metal: #3b82f620;
      --post-transition: #ec489920;
      --lanthanoid: #8b5cf620;
      --actinoid: #f9737320;
      --unknown: #6b728020;
    }
    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #000;
      color: var(--text);
      min-height: 100vh;
      padding: 1.5rem;
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
      position: relative;
      overflow-x: hidden;
    }

    #three-canvas {
      position: fixed;
      inset: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      opacity: 0.45;
      pointer-events: none;
    }

    h1 {
      margin: 0;
      font-size: clamp(1.6rem, 4vw, 2.5rem);
      letter-spacing: 0.04em;
      text-shadow: 2px 2px 8px rgba(0,0,0,0.8);
      align-self: center;
      text-align: center;
    }

    main {
      display: grid;
      grid-template-columns: minmax(0, 3fr) minmax(0, 1.1fr);
      gap: 1.5rem;
      align-items: flex-start;
      position: relative;
      z-index: 1;
      max-width: 1200px;
      width: 100%;
      margin: 0 auto;
      background-color: transparent;
      background-blend-mode: luminosity;
    }

    @media (max-width: 900px) {
      body {
        padding: 1rem;
      }
      main {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .panel {
      background: linear-gradient(135deg, rgba(15,23,42,0.55), rgba(2,6,23,0.5));
      border-radius: 0.75rem;
      border: 1px solid rgba(15,23,42,0.85);
      padding: 1rem 1.25rem 1.25rem;
      box-shadow: 0 18px 40px rgba(0,0,0,0.5);
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      min-width: 0;
    }

    .panel h2 {
      margin: 0 0 0.75rem;
      font-size: 1.1rem;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: 0.12em;
    }

    .input-row {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      margin-bottom: 0.75rem;
    }

    .input-row label {
      font-size: 0.9rem;
      color: var(--muted);
    }

    #n-input {
      width: 100%;
      min-width: 0;
      padding: 0.6rem 0.6rem;
      border-radius: 0.4rem;
      border: 1px solid var(--border);
      background: #020617;
      color: #ffffff;
      font-size: 0.95rem;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      resize: vertical;
      min-height: 2.5em;
      max-height: 14em;
      overflow-wrap: break-word;
      word-break: break-all;
    }

    #n-input::placeholder {
      color: #6b7280;
    }

    #n-input:focus {
      outline: 1px solid #22c55e80;
      border-color: #22c55e99;
    }

    .result-box {
      border-radius: 0.6rem;
      border: 1px solid var(--border);
      background: #020617;
      padding: 0.75rem 0.8rem;
      display: flex;
      flex-direction: column;
      gap: 0.6rem;
      font-size: 0.9rem;
    }

    .result-row {
      display: flex;
      justify-content: space-between;
      gap: 0.5rem;
      flex-wrap: wrap;
    }

    .result-label {
      color: var(--muted);
    }

    .result-value {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    }

    .formula-display {
      font-size: 1.3rem;
      text-align: center;
      margin: 0.5rem 0 0.75rem 0;
      padding: 0.75rem;
      background: rgba(34, 197, 94, 0.1);
      border-radius: 0.5rem;
      border: 1px solid var(--accent);
    }

    .copy-area {
      margin-top: 0.15rem;
      display: flex;
      flex-direction: column;
      gap: 0.4rem;
      align-items: stretch;
    }

    #copy-text {
      width: 100%;
      min-width: 0;
      padding: 0.35rem 0.5rem;
      border-radius: 0.4rem;
      border: 1px dashed var(--border);
      background: #020617;
      color: #ffffff;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 0.9rem;
      user-select: all;
      white-space: pre-wrap;
      word-break: break-all;
      overflow-wrap: anywhere;
      resize: vertical;
      min-height: 2.1em;
      max-height: 20em;
    }

    button {
      align-self: flex-start;
      border: none;
      border-radius: 999px;
      padding: 0.4rem 0.9rem;
      font-size: 0.85rem;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
      background: linear-gradient(135deg, #22c55e, #4ade80);
      color: white;
      transition: background 0.2s ease, transform 0.07s ease, box-shadow 0.2s ease;
      white-space: nowrap;
      box-shadow: 0 6px 12px rgba(34,197,94,0.35);
    }

    button:hover {
      background: linear-gradient(135deg, #16a34a, #22c55e);
      transform: translateY(-1px);
      box-shadow: 0 10px 20px rgba(34,197,94,0.45);
    }

    button:active {
      transform: translateY(0);
      box-shadow: 0 4px 10px rgba(34,197,94,0.3);
    }

    .status {
      font-size: 0.8rem;
      min-height: 1.1em;
    }
    .status.ok { color: var(--accent); }
    .status.err { color: var(--error); }

    .legend-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(130px, 1fr));
      gap: 0.4rem 0.75rem;
      font-size: 0.8rem;
    }
    .legend-item {
      display: flex;
      align-items: center;
      gap: 0.4rem;
    }
    .legend-swatch {
      width: 0.9rem;
      height: 0.9rem;
      border-radius: 0.2rem;
      border: 1px solid var(--border);
    }

    .table-wrapper {
      margin-top: 0.75rem;
      padding-bottom: 0.3rem;
      overflow-x: hidden;
    }

    .group-labels {
      display: grid;
      grid-template-columns: repeat(18, minmax(0, 1fr));
      gap: 0.18rem;
      margin-bottom: 0.2rem;
      font-size: 0.75rem;
      text-align: center;
      color: var(--muted);
      width: 100%;
    }

    .periodic-grid {
      display: grid;
      grid-template-columns: repeat(18, minmax(0, 1fr));
      grid-template-rows: repeat(7, 3.6rem);
      gap: 0.18rem;
      position: relative;
      width: 100%;
    }

    @media (max-width: 700px) {
      .periodic-grid {
        grid-template-rows: repeat(7, 3.2rem);
      }
      .element {
        height: 3.2rem;
      }
    }

    .element {
      position: relative;
      width: 100%;
      height: 3.6rem;
      border-radius: 0.45rem;
      border: 1px solid var(--border);
      padding: 0;
      cursor: pointer;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      background: #020617;
      transition: transform 0.09s ease, box-shadow 0.09s ease,
                  border-color 0.09s ease, background 0.09s ease;
    }
    .element:hover {
      transform: translateY(-1px);
      box-shadow: 0 6px 12px rgba(0,0,0,0.5);
      border-color: #4b5563;
      background: #020617ee;
      z-index: 1;
    }
    .element.selected {
      border-color: #22c55e;
      box-shadow: 0 0 0 1px #22c55e55;
    }
    .el-num {
      font-size: 0.65rem;
      color: var(--muted);
      text-align: right;
      padding-right: 0.2rem;
    }
    .el-symbol {
      font-size: 1.1rem;
      font-weight: 600;
      text-align: center;
    }
    .el-mass {
      font-size: 0.65rem;
      text-align: center;
      color: var(--muted);
    }
    .el-name {
      font-size: 0.4rem;
      text-align: center;
      color: #6b7280;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      padding: 0 0.1rem;
    }

    .cat-nonmetal        { background: var(--nonmetal); }
    .cat-noble-gas       { background: var(--noble-gas); }
    .cat-alkali-metal    { background: var(--alkali-metal); }
    .cat-alkaline-earth  { background: var(--alkaline-earth); }
    .cat-metalloid       { background: var(--metalloid); }
    .cat-halogen         { background: var(--halogen); }
    .cat-transition-metal{ background: var(--transition-metal); }
    .cat-post-transition { background: var(--post-transition); }
    .cat-lanthanoid      { background: var(--lanthanoid); }
    .cat-actinoid        { background: var(--actinoid); }
    .cat-unknown         { background: var(--unknown); }

    .f-block-label-row {
      display: flex;
      gap: 0.4rem;
      align-items: baseline;
      margin-top: 0.4rem;
      font-size: 0.75rem;
      color: var(--muted);
    }
    .f-block-label-row span {
      white-space: nowrap;
    }
    .f-block-grid {
      display: grid;
      grid-template-columns: repeat(15, minmax(0, 1fr));
      gap: 0.18rem;
      margin-top: 0.15rem;
      width: 100%;
    }
  </style>
</head>
<body>
  <canvas id="three-canvas"></canvas>

  <h1 style="text-shadow: 2px 2px 4px black;">Cia's Factorialized Quantified Atomic Value Reducer</h1>

  <main>
    <!-- Periodic table + calculator panels exactly as you had them before.
         I’m leaving your existing HTML for those unchanged for brevity. -->
    <!-- BEGIN MAIN CONTENT -->
    <section class="panel">
      <h2>Periodic Table</h2>
      <div class="legend-grid">
        <div class="legend-item"><span class="legend-swatch" style="background: var(--alkali-metal);"></span>Alkali metals</div>
        <div class="legend-item"><span class="legend-swatch" style="background: var(--alkaline-earth);"></span>Alkaline earth metals</div>
        <div class="legend-item"><span class="legend-swatch" style="background: var(--transition-metal);"></span>Transition metals</div>
        <div class="legend-item"><span class="legend-swatch" style="background: var(--post-transition);"></span>Post‑transition metals</div>
        <div class="legend-item"><span class="legend-swatch" style="background: var(--metalloid);"></span>Metalloids</div>
        <div class="legend-item"><span class="legend-swatch" style="background: var(--nonmetal);"></span>Other nonmetals</div>
        <div class="legend-item"><span class="legend-swatch" style="background: var(--halogen);"></span>Halogens</div>
        <div class="legend-item"><span class="legend-swatch" style="background: var(--noble-gas);"></span>Noble gases</div>
        <div class="legend-item"><span class="legend-swatch" style="background: var(--lanthanoid);"></span>Lanthanoids</div>
        <div class="legend-item"><span class="legend-swatch" style="background: var(--actinoid);"></span>Actinoids</div>
        <div class="legend-item"><span class="legend-swatch" style="background: var(--unknown);"></span>Unknown / synthetic</div>
      </div>

      <div class="table-wrapper">
        <div class="group-labels" id="group-labels"></div>
        <div class="periodic-grid" id="periodic-grid"></div>

        <div class="f-block-label-row">
          <span><br>Lanthanoids</span>
        </div>
        <div class="f-block-grid" id="lanth-grid"></div>

        <div class="f-block-label-row">
          <span><br>Actinoids</span>
        </div>
        <div class="f-block-grid" id="act-grid"></div>
      </div>
    </section>

    <section class="panel">
       <div style="text-shadow: 2px 2px 4px black; text-align: center; font-size: 30px; margin-top: 15px; margin-bottom: 20px;">\(\lfloor n / (a \cdot 67 \cdot 12) \rfloor\)</div>
      <div class="input-row">
        <label for="n-input">\(n =\)</label>
        <textarea id="n-input" placeholder="integers goes here :3"></textarea>
      </div>

      <div class="result-box" id="result-box">
        <div class="result-row">
          <span class="result-label">\(element =\)</span>
          <span class="result-value" id="selected-el">None</span>
        </div>
        <div class="result-row">
          <span class="result-label">\(a =\)</span>
          <span class="result-value" id="selected-a">–</span>
        </div>
        <div class="result-row">
          <span class="result-label">\(result =\)</span>
        </div>
        <div class="copy-area">
          <textarea id="copy-text" readonly>–</textarea>
          <button id="copy-btn" type="button">copies :3</button>
        </div>
        <div class="status" id="status-line"></div>
      </div>
    </section>
    <!-- END MAIN CONTENT -->
  </main>

  <script>
    // ---------- 3D ATOM BACKGROUND (REWRITTEN) ----------
    function initThreeJS() {
      const canvas = document.getElementById('three-canvas');
      const scene = new THREE.Scene();

      const camera = new THREE.PerspectiveCamera(
        70,
        window.innerWidth / window.innerHeight,
        0.1,
        1000
      );
      camera.position.set(0, 0, 28);

      const renderer = new THREE.WebGLRenderer({ canvas, alpha: true, antialias: true });
      renderer.setSize(window.innerWidth, window.innerHeight);
      renderer.setPixelRatio(window.devicePixelRatio || 1);
      renderer.setClearColor(0x000000, 0.0);

      const atoms = [];

      const protonColor = 0xff5555;
      const neutronColor = 0x5555ff;
      const electronColor = 0xffffff;
      const ringColor = 0x9ca3af;

      const protonGeom = new THREE.SphereGeometry(0.18, 14, 14);
      const neutronGeom = new THREE.SphereGeometry(0.18, 14, 14);
      const electronGeom = new THREE.SphereGeometry(0.08, 12, 12);

      function createNucleus() {
        const nucleus = new THREE.Group();
        const protonMat = new THREE.MeshBasicMaterial({ color: protonColor });
        const neutronMat = new THREE.MeshBasicMaterial({ color: neutronColor });

        const nucleons = [];
        const count = 8;
        for (let i = 0; i < count; i++) {
          const isProton = (i % 2 === 0);
          const geom = isProton ? protonGeom : neutronGeom;
          const mat = isProton ? protonMat : neutronMat;
          const m = new THREE.Mesh(geom, mat);

          const phi = Math.acos(2 * Math.random() - 1);
          const theta = Math.random() * Math.PI * 2;
          const r = 0.3 + Math.random() * 0.08;

          const x = r * Math.sin(phi) * Math.cos(theta);
          const y = r * Math.sin(phi) * Math.sin(theta);
          const z = r * Math.cos(phi);

          m.position.set(x, y, z);
          m.userData = {
            basePos: new THREE.Vector3(x, y, z),
            phase: Math.random() * Math.PI * 2
          };

          nucleus.add(m);
          nucleons.push(m);
        }
        nucleus.userData.nucleons = nucleons;
        return nucleus;
      }

      function createShell(radius, tiltX, tiltY, electronsCount, baseSpeed) {
        const shellGroup = new THREE.Group();

        const ringGeom = new THREE.TorusGeometry(radius, 0.02, 8, 96);
        const ringMat = new THREE.MeshBasicMaterial({
          color: ringColor,
          transparent: true,
          opacity: 0.35
        });
        const ring = new THREE.Mesh(ringGeom, ringMat);
        shellGroup.add(ring);

        shellGroup.rotation.x = tiltX;
        shellGroup.rotation.y = tiltY;

        const electrons = [];
        for (let i = 0; i < electronsCount; i++) {
          const mat = new THREE.MeshBasicMaterial({
            color: electronColor,
            transparent: true,
            opacity: 0.9
          });
          const e = new THREE.Mesh(electronGeom, mat);

          const baseAngle = (i / electronsCount) * Math.PI * 2;
          e.userData = {
            radius,
            baseAngle,
            speed: baseSpeed
          };

          const x = Math.cos(baseAngle) * radius;
          const z = Math.sin(baseAngle) * radius;
          e.position.set(x, 0, z);

          shellGroup.add(e);
          electrons.push(e);
        }

        shellGroup.userData.electrons = electrons;
        shellGroup.userData.angularSpeed = (Math.random() > 0.5 ? 1 : -1) * 0.04;

        return shellGroup;
      }

      function createAtom() {
        const atom = new THREE.Group();

        const nucleus = createNucleus();
        atom.add(nucleus);

        const shells = [];

        const shellDefs = [
          { radius: 1.0, electrons: 2,  speed: 0.5 },
          { radius: 1.6, electrons: 4,  speed: 0.35 },
          { radius: 2.2, electrons: 6,  speed: 0.25 }
        ];

        shellDefs.forEach(def => {
          const tiltX = (Math.random() - 0.5) * 0.9;
          const tiltY = (Math.random() - 0.5) * 0.9;
          const shell = createShell(def.radius, tiltX, tiltY, def.electrons, def.speed);
          shells.push(shell);
          atom.add(shell);
        });

        atom.userData = {
          nucleus,
          shells,
          rotationSpeed: (Math.random() - 0.5) * 0.05,
          velocity: new THREE.Vector3(
            (Math.random() - 0.5) * 0.02,
            (Math.random() - 0.5) * 0.02,
            (Math.random() - 0.5) * 0.02
          )
        };

        atom.position.set(
          (Math.random() - 0.5) * 50,
          (Math.random() - 0.5) * 50,
          (Math.random() - 0.5) * 50
        );

        scene.add(atom);
        atoms.push(atom);
      }

      for (let i = 0; i < 26; i++) {
        createAtom();
      }

      const clock = new THREE.Clock();

      function animate() {
        requestAnimationFrame(animate);
        const t = clock.getElapsedTime();
        const dt = clock.getDelta();

        atoms.forEach(atom => {
          const v = atom.userData.velocity;
          atom.position.addScaledVector(v, 1);

          const limit = 26;
          if (atom.position.x > limit || atom.position.x < -limit) v.x *= -1;
          if (atom.position.y > limit || atom.position.y < -limit) v.y *= -1;
          if (atom.position.z > limit || atom.position.z < -limit) v.z *= -1;

          atom.rotation.y += atom.userData.rotationSpeed * dt;

          const nucleus = atom.userData.nucleus;
          nucleus.userData.nucleons.forEach(n => {
            const base = n.userData.basePos;
            const phase = n.userData.phase;
            const wobble = 0.03;

            n.position.set(
              base.x + Math.sin(t * 1.2 + phase) * wobble,
              base.y + Math.cos(t * 1.0 + phase) * wobble,
              base.z + Math.sin(t * 0.8 + phase) * wobble
            );
          });

          atom.userData.shells.forEach(shell => {
            shell.rotation.y += shell.userData.angularSpeed * dt;

            shell.userData.electrons.forEach(e => {
              const u = e.userData;
              const angle = u.baseAngle + t * u.speed * 2 * Math.PI;
              const x = Math.cos(angle) * u.radius;
              const z = Math.sin(angle) * u.radius;
              e.position.set(x, 0, z);
            });
          });
        });

        const camR = 6;
        camera.position.x = Math.sin(t * 0.03) * camR;
        camera.position.z = 28 + Math.cos(t * 0.03) * 4;
        camera.position.y = Math.sin(t * 0.02) * 3;
        camera.lookAt(scene.position);

        renderer.render(scene, camera);
      }

      animate();

      window.addEventListener('resize', () => {
        const w = window.innerWidth;
        const h = window.innerHeight;
        camera.aspect = w / h;
        camera.updateProjectionMatrix();
        renderer.setSize(w, h);
      });
    }

    initThreeJS();
  </script>

  <script>
    // ---------- PERIODIC TABLE + CALCULATOR (YOUR ORIGINAL LOGIC) ----------
    const elements = [
      [1,  "H",  "Hydrogen",       1, 1, 1.008,    "nonmetal"],
      [2,  "He", "Helium",        18, 1, 4.0026,  "noble-gas"],
      [3,  "Li", "Lithium",        1, 2, 6.94,    "alkali-metal"],
      [4,  "Be", "Beryllium",      2, 2, 9.0122,  "alkaline-earth"],
      [5,  "B",  "Boron",         13, 2, 10.81,   "metalloid"],
      [6,  "C",  "Carbon",        14, 2, 12.011,  "nonmetal"],
      [7,  "N",  "Nitrogen",      15, 2, 14.007,  "nonmetal"],
      [8,  "O",  "Oxygen",        16, 2, 15.999,  "nonmetal"],
      [9,  "F",  "Fluorine",      17, 2, 18.998,  "halogen"],
      [10, "Ne", "Neon",          18, 2, 20.180,  "noble-gas"],
      [11, "Na", "Sodium",         1, 3, 22.990,  "alkali-metal"],
      [12, "Mg", "Magnesium",      2, 3, 24.305,  "alkaline-earth"],
      [13, "Al", "Aluminium",     13, 3, 26.982,  "post-transition"],
      [14, "Si", "Silicon",       14, 3, 28.085,  "metalloid"],
      [15, "P",  "Phosphorus",    15, 3, 30.974,  "nonmetal"],
      [16, "S",  "Sulfur",        16, 3, 32.06,   "nonmetal"],
      [17, "Cl", "Chlorine",      17, 3, 35.45,   "halogen"],
      [18, "Ar", "Argon",         18, 3, 39.948,  "noble-gas"],
      [19, "K",  "Potassium",      1, 4, 39.0983, "alkali-metal"],
      [20, "Ca", "Calcium",        2, 4, 40.078,  "alkaline-earth"],
      [21, "Sc", "Scandium",       3, 4, 44.9559, "transition-metal"],
      [22, "Ti", "Titanium",       4, 4, 47.867,  "transition-metal"],
      [23, "V",  "Vanadium",       5, 4, 50.942,  "transition-metal"],
      [24, "Cr", "Chromium",       6, 4, 51.996,  "transition-metal"],
      [25, "Mn", "Manganese",      7, 4, 54.938,  "transition-metal"],
      [26, "Fe", "Iron",           8, 4, 55.845,  "transition-metal"],
      [27, "Co", "Cobalt",         9, 4, 58.933,  "transition-metal"],
      [28, "Ni", "Nickel",        10, 4, 58.693,  "transition-metal"],
      [29, "Cu", "Copper",        11, 4, 63.546,  "transition-metal"],
      [30, "Zn", "Zinc",          12, 4, 65.38,   "transition-metal"],
      [31, "Ga", "Gallium",       13, 4, 69.723,  "post-transition"],
      [32, "Ge", "Germanium",     14, 4, 72.630,  "metalloid"],
      [33, "As", "Arsenic",       15, 4, 74.922,  "metalloid"],
      [34, "Se", "Selenium",      16, 4, 78.971,  "nonmetal"],
      [35, "Br", "Bromine",       17, 4, 79.904,  "halogen"],
      [36, "Kr", "Krypton",       18, 4, 83.798,  "noble-gas"],
      [37, "Rb", "Rubidium",       1, 5, 85.468,  "alkali-metal"],
      [38, "Sr", "Strontium",      2, 5, 87.62,   "alkaline-earth"],
      [39, "Y",  "Yttrium",        3, 5, 88.906,  "transition-metal"],
      [40, "Zr", "Zirconium",      4, 5, 91.224,  "transition-metal"],
      [41, "Nb", "Niobium",        5, 5, 92.906,  "transition-metal"],
      [42, "Mo", "Molybdenum",     6, 5, 95.95,   "transition-metal"],
      [43, "Tc", "Technetium",     7, 5, 98,      "transition-metal"],
      [44, "Ru", "Ruthenium",      8, 5, 101.07,  "transition-metal"],
      [45, "Rh", "Rhodium",        9, 5, 102.91,  "transition-metal"],
      [46, "Pd", "Palladium",     10, 5, 106.42,  "transition-metal"],
      [47, "Ag", "Silver",        11, 5, 107.87,  "transition-metal"],
      [48, "Cd", "Cadmium",       12, 5, 112.41,  "transition-metal"],
      [49, "In", "Indium",        13, 5, 114.82,  "post-transition"],
      [50, "Sn", "Tin",           14, 5, 118.71,  "post-transition"],
      [51, "Sb", "Antimony",      15, 5, 121.76,  "metalloid"],
      [52, "Te", "Tellurium",     16, 5, 127.60,  "metalloid"],
      [53, "I",  "Iodine",        17, 5, 126.90,  "halogen"],
      [54, "Xe", "Xenon",         18, 5, 131.29,  "noble-gas"],
      [55, "Cs", "Caesium",        1, 6, 132.91,  "alkali-metal"],
      [56, "Ba", "Barium",         2, 6, 137.33,  "alkaline-earth"],
      [72, "Hf", "Hafnium",        4, 6, 178.49,  "transition-metal"],
      [73, "Ta", "Tantalum",       5, 6, 180.95,  "transition-metal"],
      [74, "W",  "Tungsten",       6, 6, 183.84,  "transition-metal"],
      [75, "Re", "Rhenium",        7, 6, 186.21,  "transition-metal"],
      [76, "Os", "Osmium",         8, 6, 190.23,  "transition-metal"],
      [77, "Ir", "Iridium",        9, 6, 192.22,  "transition-metal"],
      [78, "Pt", "Platinum",      10, 6, 195.08,  "transition-metal"],
      [79, "Au", "Gold",          11, 6, 196.97,  "transition-metal"],
      [80, "Hg", "Mercury",       12, 6, 200.59,  "transition-metal"],
      [81, "Tl", "Thallium",      13, 6, 204.38,  "post-transition"],
      [82, "Pb", "Lead",          14, 6, 207.2,   "post-transition"],
      [83, "Bi", "Bismuth",       15, 6, 208.98,  "post-transition"],
      [84, "Po", "Polonium",      16, 6, 209,     "post-transition"],
      [85, "At", "Astatine",      17, 6, 210,     "halogen"],
      [86, "Rn", "Radon",         18, 6, 222,     "noble-gas"],
      [87, "Fr", "Francium",       1, 7, 223,     "alkali-metal"],
      [88, "Ra", "Radium",         2, 7, 226,     "alkaline-earth"],
      [104,"Rf", "Rutherfordium",  4, 7, 267,     "transition-metal"],
      [105,"Db", "Dubnium",        5, 7, 268,     "transition-metal"],
      [106,"Sg", "Seaborgium",     6, 7, 269,     "transition-metal"],
      [107,"Bh", "Bohrium",        7, 7, 270,     "transition-metal"],
      [108,"Hs", "Hassium",        8, 7, 270,     "transition-metal"],
      [109,"Mt", "Meitnerium",     9, 7, 278,     "unknown"],
      [110,"Ds", "Darmstadtium",  10, 7, 281,     "unknown"],
      [111,"Rg", "Roentgenium",   11, 7, 282,     "unknown"],
      [112,"Cn", "Copernicium",   12, 7, 285,     "unknown"],
      [113,"Nh", "Nihonium",      13, 7, 286,     "unknown"],
      [114,"Fl", "Flerovium",     14, 7, 289,     "unknown"],
      [115,"Mc", "Moscovium",     15, 7, 289,     "unknown"],
      [116,"Lv", "Livermorium",   16, 7, 293,     "unknown"],
      [117,"Ts", "Tennessine",    17, 7, 294,     "unknown"],
      [118,"Og", "Oganesson",     18, 7, 294,     "unknown"],
    ];

    const lanthanoids = [
      [57, "La", "Lanthanum",    3, 6, 138.91, "lanthanoid"],
      [58, "Ce", "Cerium",       3, 6, 140.12, "lanthanoid"],
      [59, "Pr", "Praseodymium", 3, 6, 140.91, "lanthanoid"],
      [60, "Nd", "Neodymium",    3, 6, 144.24, "lanthanoid"],
      [61, "Pm", "Promethium",   3, 6, 145,    "lanthanoid"],
      [62, "Sm", "Samarium",     3, 6, 150.36, "lanthanoid"],
      [63, "Eu", "Europium",     3, 6, 151.96, "lanthanoid"],
      [64, "Gd", "Gadolinium",   3, 6, 157.25, "lanthanoid"],
      [65, "Tb", "Terbium",      3, 6, 158.93, "lanthanoid"],
      [66, "Dy", "Dysprosium",   3, 6, 162.50, "lanthanoid"],
      [67, "Ho", "Holmium",      3, 6, 164.93, "lanthanoid"],
      [68, "Er", "Erbium",       3, 6, 167.26, "lanthanoid"],
      [69, "Tm", "Thulium",      3, 6, 168.93, "lanthanoid"],
      [70, "Yb", "Ytterbium",    3, 6, 173.05, "lanthanoid"],
      [71, "Lu", "Lutetium",     3, 6, 174.97, "lanthanoid"],
    ];

    const actinoids = [
      [89, "Ac", "Actinium",      3, 7, 227,    "actinoid"],
      [90, "Th", "Thorium",       3, 7, 232.04, "actinoid"],
      [91, "Pa", "Protactinium",  3, 7, 231.04, "actinoid"],
      [92, "U",  "Uranium",       3, 7, 238.03, "actinoid"],
      [93, "Np", "Neptunium",     3, 7, 237,    "actinoid"],
      [94, "Pu", "Plutonium",     3, 7, 244,    "actinoid"],
      [95, "Am", "Americium",     3, 7, 243,    "actinoid"],
      [96, "Cm", "Curium",        3, 7, 247,    "actinoid"],
      [97, "Bk", "Berkelium",     3, 7, 247,    "actinoid"],
      [98, "Cf", "Californium",   3, 7, 251,    "actinoid"],
      [99, "Es", "Einsteinium",   3, 7, 252,    "actinoid"],
      [100,"Fm", "Fermium",       3, 7, 257,    "actinoid"],
      [101,"Md", "Mendelevium",   3, 7, 258,    "actinoid"],
      [102,"No", "Nobelium",      3, 7, 259,    "actinoid"],
      [103,"Lr", "Lawrencium",    3, 7, 266,    "actinoid"],
    ];

    const groupLabels = document.getElementById("group-labels");
    const grid = document.getElementById("periodic-grid");
    const lanthGrid = document.getElementById("lanth-grid");
    const actGrid = document.getElementById("act-grid");
    const nInput = document.getElementById("n-input");
    const selectedElSpan = document.getElementById("selected-el");
    const selectedASpan = document.getElementById("selected-a");
    const copyTextDiv = document.getElementById("copy-text");
    const statusLine = document.getElementById("status-line");
    const copyBtn = document.getElementById("copy-btn");

    let selectedAtomic = null;
    let selectedName = null;
    let selectedSymbol = null;

    for (let g = 1; g <= 18; g++) {
      const div = document.createElement("div");
      div.textContent = g;
      groupLabels.appendChild(div);
    }

    const cellMap = {};
    for (const [Z, sym, name, g, p, mass, cat] of elements) {
      cellMap[`${p},${g}`] = { Z, sym, name, mass, cat };
    }

    for (let p = 1; p <= 7; p++) {
      for (let g = 1; g <= 18; g++) {
        const key = `${p},${g}`;
        const found = cellMap[key];
        const cell = document.createElement("div");

        if (found) {
          const { Z, sym, name, mass, cat } = found;
          cell.className = `element cat-${cat}`;
          cell.dataset.atomic = Z;
          cell.dataset.symbol = sym;
          cell.dataset.name = name;
          cell.innerHTML = `
            <div class="el-num">${Z}</div>
            <div class="el-symbol">${sym}</div>
            <div class="el-mass">${mass.toFixed(1)}</div>
            <div class="el-name">${name}</div>
          `;
          cell.addEventListener("click", () => selectElement(cell));
        } else {
          cell.style.visibility = "hidden";
        }
        grid.appendChild(cell);
      }
    }

    function buildFBlockRow(container, data) {
      data.forEach(([Z, sym, name, g, p, mass, cat]) => {
        const cell = document.createElement("div");
        cell.className = `element cat-${cat}`;
        cell.dataset.atomic = Z;
        cell.dataset.symbol = sym;
        cell.dataset.name = name;
        cell.innerHTML = `
          <div class="el-num">${Z}</div>
          <div class="el-symbol">${sym}</div>
          <div class="el-mass">${mass.toFixed(1)}</div>
          <div class="el-name">${name}</div>
        `;
        cell.addEventListener("click", () => selectElement(cell));
        container.appendChild(cell);
      });
    }

    buildFBlockRow(lanthGrid, lanthanoids);
    buildFBlockRow(actGrid, actinoids);

    function selectElement(el) {
      document.querySelectorAll(".element.selected").forEach(e => e.classList.remove("selected"));
      el.classList.add("selected");
      selectedAtomic = BigInt(el.dataset.atomic);
      selectedName = el.dataset.name;
      selectedSymbol = el.dataset.symbol;
      selectedElSpan.textContent = selectedName;
      selectedASpan.textContent = selectedAtomic.toString();
      recompute();
    }

    function parseBigIntInput(text) {
      const trimmed = text.trim();
      if (!trimmed) return null;
      if (!/^[+-]?\d+$/.test(trimmed)) return NaN;
      try {
        return BigInt(trimmed);
      } catch {
        return NaN;
      }
    }

    function recompute() {
      statusLine.textContent = "";
      statusLine.className = "status";

      const n = parseBigIntInput(nInput.value);
      if (n === null || selectedAtomic === null) {
        copyTextDiv.value = "–";
        return;
      }
      if (Number.isNaN(n)) {
        statusLine.textContent = "uhmms me nu thinks that integers";
        statusLine.classList.add("err");
        copyTextDiv.value = "–";
        return;
      }

      const h = selectedAtomic * 67n * 12n;
      const q = n / h;
      const qs = q.toString();
      copyTextDiv.value = qs;
      statusLine.textContent = `calculation successful :3`;
      statusLine.classList.add("ok");
    }

    nInput.addEventListener("input", recompute);

    copyBtn.addEventListener("click", async () => {
      const text = copyTextDiv.value;
      if (!text || text === "–") {
        statusLine.textContent = "nothing to copy :3";
        statusLine.className = "status err";
        return;
      }
      try {
        await navigator.clipboard.writeText(text);
        statusLine.textContent = "copied :3";
        statusLine.className = "status ok";
      } catch (e) {
        statusLine.textContent = "copy failed :Ɛ";
        statusLine.className = "status err";
      }
    });

    const defaultEl = Array.from(document.querySelectorAll(".element"))
      .find(el => el.dataset.symbol === "H");
    if (defaultEl) selectElement(defaultEl);
  </script>
</body>
</html>
